<script>
  $('#pub_date_from').setCalendar({src:'/assets/calendar.png'});
  $('#pub_date_to').setCalendar({src:'/assets/calendar.png'});
  $('#acquired_from').setCalendar({src:'/assets/calendar.png'});
  $('#acquired_to').setCalendar({src:'/assets/calendar.png'});
  $('#removed_from').setCalendar({src:'/assets/calendar.png'});
  $('#removed_to').setCalendar({src:'/assets/calendar.png'});
</script>
<%= form_tag({:controller => 'manifestations'}, {:method => 'get'}) do -%>
  <table style="width: 100%">
    <tr>
      <td><label><%= t('page.title') -%>:</label></td>
      <td><%= search_field_tag 'query', nil, :class => 'search_form_short', :placeholder => t('page.search_term') -%><br />
        <%= t('advanced_search.help_query') -%>
      </td>
    </tr>
    <% if defined?(EnjuBookmark) %>
      <tr>
        <td><label><%= t('page.tag') -%>:</label></td>
        <td><%= text_field_tag 'tag' -%></td>
      </tr>
    <%- end -%>
    <tr>
      <td><label><%= t('patron.creator') -%>:</label></td>
      <td><%= text_field_tag 'creator' -%></td>
    </tr>
    <tr>
      <td><label><%= t('patron.publisher') -%>:</label></td>
      <td><%= text_field_tag 'publisher' -%></td>
    </tr>
    <tr>
      <td><label><%= t('activerecord.attributes.manifestation.isbn') -%>:</label></td>
      <td><%= text_field_tag 'isbn' -%><%= t('advanced_search.help_isbn') -%></td>
    </tr>
    <tr>
      <td><label><%= t('activerecord.attributes.manifestation.issn') -%>:</label></td>
      <td><%= text_field_tag 'issn' -%><%= t('advanced_search.help_issn') -%></td>
    </tr>
    <tr>
      <td><label><%= t('activerecord.attributes.item.item_identifier') -%>:</label></td>
      <td><%= text_field_tag 'item_identifier' -%></td>
    </tr>
    <tr>
      <td><label><%= t('activerecord.attributes.manifestation.date_of_publication') -%>:</label></td>
      <td><%= t('advanced_search.from') -%> <%= text_field_tag 'pub_date_from', nil, :class => 'date_text_field', :placeholder => "#{t('page.example')}: 1978, 1978-04-12" -%>
        <%= t('advanced_search.to') -%> <%= text_field_tag 'pub_date_to', nil, :class => 'date_text_field', :placeholder => "#{t('page.example')}: 2011, 2011-04-12"-%></td>
    </tr>
    <tr>
      <td><label><%= t('activerecord.attributes.item.acquired_at') -%>:</label></td>
      <td><%= t('advanced_search.from') -%> <%= text_field_tag 'acquired_from', nil, :class => 'wide_date_text_field', :placeholder => "#{t('page.example')}: 2005, 2005-04-01" -%>
        <%= t('advanced_search.to') -%> <%= text_field_tag 'acquired_to', nil, :class => 'wide_date_text_field', :placeholder => "#{t('page.example')}: 2011, 2011-03-31"-%></td>
    </tr>
    <% if user_signed_in? and current_user.has_role?('Librarian') %>
      <tr>
        <td><label><%= t('activerecord.attributes.item.removed_at') %>:</label></td>
        <td>
          <%= t('advanced_search.from') %>
          <%= text_field_tag 'removed_from', nil, :class => 'wide_date_text_field', :placeholder => "#{t('page.example')}: 2005, 2005-04-01" %>
          <%= t('advanced_search.to') %>
          <%= text_field_tag 'removed_to', nil, :class => 'wide_date_text_field', :placeholder => "#{t('page.example')}: 2011, 2011-03-31" %>
        </td>
      </tr>
    <% end %>
    <tr>
      <td><label><%= t('page.number_of_pages') -%>:</label></td>
        <td><%= t('advanced_search.from') -%> <%= text_field_tag 'number_of_pages_at_least', nil, :size => 5 -%>
          <%= t('advanced_search.to') -%> <%= text_field_tag 'number_of_pages_at_most', nil, :size => 5 -%></td>
    </tr>
    <% if SystemConfiguration.get('manifestation.manage_item_rank') %>
      <% if user_signed_in? and current_user.has_role?('Librarian') %>
        <tr>
          <td></td>
          <td>
            <%= check_box_tag 'all_manifestations', true %>
            <%= t('advanced_search.all_manifestations') %>
          </td>
        </tr>
      <% end %>
    <% end %>
    <tr>
      <td></td>
      <td>
        <%= hidden_field_tag 'advanced_search', 'true' -%>
        <%= hidden_field_tag 'user_id', params[:user_id] if params[:user_id] -%>
        <%= submit_tag t('page.search') -%>
      </td>
    </tr>
  </table>
<%- end -%>
<%= javascript_tag("$('#query').focus()") -%>
